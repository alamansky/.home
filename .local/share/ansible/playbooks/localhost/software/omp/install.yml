- import_playbook: ../../software/unzip/install.yml # dependency
- name: install omp
  hosts: localhost
  vars_files:
    - data.yml
  vars:
    command: curl -s "{{ script }}" | bash -s -- -d "{{ destination }}"
  tasks:
    - name: run install script
      include_tasks:
        file: ../../library/tasks/run_install_script.yml
    - name: initialize
      lineinfile:
        path: $XDG_CONFIG_HOME/zsh/.zshrc
        line: |
          # set theme
          # https://ohmyposh.dev/docs/installation/customize
          [[ -x "$(command -v oh-my-posh)" ]] && \
            eval "$(oh-my-posh init zsh --config 'agnoster.minimal')"
        state: present
        create: yes
        insertafter: EOF
    - name: source profile
      shell: . ~/.profile
    - name: install nerd font
      shell: oh-my-posh font install meslo
